<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="ixfxKhsOMs232DgGMNT65Cgwn5TPQ1L00s4aTQ3Myww" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Formatter Online - Format, Validate & Beautify JSON | Free JSON Tools</title>
    <meta name="description" content="Free online JSON formatter, validator, and beautifier. Format, minify, validate JSON data instantly. Best JSON formatter tool with syntax highlighting and error detection.">
    <meta name="keywords" content="json formatter, json validator, json beautifier, json minifier, format json online, validate json, json parser, json tools">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://json-formatter-new.vercel.app/">
    <meta property="og:title" content="JSON Formatter Online - Format & Validate JSON">
    <meta property="og:description" content="Free online JSON formatter and validator. Format, beautify, and validate JSON data with syntax highlighting.">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="Free online JSON formatter and validator. Format, beautify, and validate JSON data with syntax highlighting.">
    <link rel="icon" type="image/x-icon" href="logo.png">
    <link rel="icon" type="image/png" sizes="32x32" href="logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="logo.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .main-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .tool-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 600;
        }
        
        .tab:hover {
            background-color: #f8f9fa;
        }
        
        .input-section {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            margin-bottom: 20px;
            align-items: start;
        }
        
        @media (max-width: 768px) {
            .input-section {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
        
        .textarea-container {
            position: relative;
        }
        
        textarea {
            width: 100%;
            height: 400px;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }
        
        .middle-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            justify-content: center;
            align-items: center;
            min-height: 400px;
            padding: 20px 0;
        }
        
        @media (max-width: 768px) {
            .middle-controls {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                min-height: auto;
                padding: 10px 0;
            }
        }
        
        .middle-controls button {
            min-width: 120px;
            white-space: nowrap;
        }
        
        @media (max-width: 768px) {
            .middle-controls button {
                min-width: auto;
                flex: 1;
                margin: 5px;
            }
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .status {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
        }
        
        .seo-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            line-height: 1.6;
        }
        
        .hidden {
            display: none;
        }
        
        .indent-controls {
            margin-bottom: 15px;
        }
        
        .indent-controls label {
            margin-right: 15px;
            font-size: 14px;
        }
        
        .indent-controls input[type="number"] {
            width: 60px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            width: 95%;
            height: 90%;
            max-width: 1400px;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease-out;
        }
        
        .modal-header {
            padding: 20px 30px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px 15px 0 0;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
        }
        
        .close-modal {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }
        
        .close-modal:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .modal-body {
            flex: 1;
            padding: 20px;
            overflow: auto;
            background: #fafafa;
        }
        
        /* Tree View Styles */
        .tree-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            height: 100%;
            overflow: auto;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
        }
        
        .tree-node {
            margin-left: 20px;
            position: relative;
        }
        
        .tree-node:before {
            content: '';
            position: absolute;
            left: -15px;
            top: 0;
            bottom: 50%;
            width: 1px;
            background: #ccc;
        }
        
        .tree-node:after {
            content: '';
            position: absolute;
            left: -15px;
            top: 12px;
            width: 10px;
            height: 1px;
            background: #ccc;
        }
        
        .tree-root {
            margin-left: 0;
        }
        
        .tree-root:before,
        .tree-root:after {
            display: none;
        }
        
        .tree-key {
            color: #0066cc;
            font-weight: bold;
            cursor: pointer;
        }
        
        .tree-string {
            color: #009900;
        }
        
        .tree-number {
            color: #cc6600;
        }
        
        .tree-boolean {
            color: #cc0066;
            font-weight: bold;
        }
        
        .tree-null {
            color: #999;
            font-style: italic;
        }
        
        .tree-bracket {
            color: #666;
            font-weight: bold;
        }
        
        .tree-expandable {
            cursor: pointer;
            user-select: none;
        }
        
        .tree-expandable:hover {
            background-color: #f0f8ff;
            border-radius: 3px;
        }
        
        .tree-collapsed .tree-children {
            display: none;
        }
        
        .tree-toggle {
            display: inline-block;
            width: 12px;
            text-align: center;
            margin-right: 5px;
            font-size: 10px;
            color: #666;
        }
        
        .tree-children {
            margin-top: 5px;
        }
        
        .tree-count {
            color: #999;
            font-size: 0.9em;
            margin-left: 5px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(50px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .btn-tree {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .btn-tree:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(40, 167, 69, 0.4);
        }
    </style>
    <script type="application/ld+json">
        {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "JSON Formatter",
        "description": "Free online JSON formatter and validator to format, beautify, and validate JSON instantly.",
        "url": "https://json-formatter-new.vercel.app/",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "All",
        "browserRequirements": "Requires JavaScript",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "CodeAkash"
        },
        "datePublished": "2024-12-15",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "163",
            "bestRating": "5",
            "worstRating": "1"
        }
        }
        </script>

</head>
<body>
    <div class="container">
        <header>
            <h1>JSON Formatter & Validator</h1>
            <p class="subtitle">Format, validate, and beautify JSON data with our professional online tool</p>
        </header>
        
        <div class="main-content">
            <div class="tool-tabs">
                <button class="tab active" onclick="switchTab('formatter')">JSON Formatter</button>
                <button class="tab" onclick="switchTab('validator')">JSON Validator</button>
                <button class="tab" onclick="switchTab('minifier')">JSON Minifier</button>
            </div>
            
            <div id="formatter-tool">
                <div class="indent-controls">
                    <label>
                        Indent Type:
                        <select id="indentType">
                            <option value="spaces">Spaces</option>
                            <option value="tabs">Tabs</option>
                        </select>
                    </label>
                    <label>
                        Indent Size:
                        <input type="number" id="indentSize" value="2" min="1" max="8">
                    </label>
                </div>
                
                <div class="input-section">
                    <div class="textarea-container">
                        <label class="label">Input JSON (Paste your JSON here)</label>
                        <textarea id="inputJson" placeholder='Paste your JSON here, e.g., {"name":"John","age":30,"city":"New York"}'></textarea>
                    </div>
                    <div class="middle-controls">
                        <button class="btn-primary" onclick="formatJson()">Format JSON</button>
                        <button class="btn-secondary" onclick="clearAll()">Clear All</button>
                        <button class="btn-success" onclick="copyOutput()">Copy Result</button>
                        <button class="btn-secondary" onclick="loadSample()">Load Sample</button>
                    </div>
                    <div class="textarea-container">
                        <label class="label">Formatted JSON Output</label>
                        <textarea id="outputJson" readonly placeholder="Formatted JSON will appear here..."></textarea>
                    </div>
                </div>
            </div>
            
            <div id="status"></div>
            
            <div class="features">
                <div class="feature-card">
                    <div class="feature-icon">🎯</div>
                    <h3>Instant Formatting</h3>
                    <p>Format JSON instantly with proper indentation and syntax highlighting</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">✅</div>
                    <h3>JSON Validation</h3>
                    <p>Validate JSON syntax and detect errors with detailed error messages</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🗜️</div>
                    <h3>Minify JSON</h3>
                    <p>Compress JSON by removing whitespace and unnecessary characters</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🔒</div>
                    <h3>100% Secure</h3>
                    <p>All processing happens in your browser. Your data never leaves your device</p>
                </div>
            </div>
        </div>
        
        <div class="seo-content">
            <h2>About Our JSON Formatter Tool</h2>
            <p>Our JSON formatter is a powerful online tool designed to help developers, data analysts, and anyone working with JSON data format, validate, and beautify their JSON strings. Whether you need to format minified JSON for better readability or validate JSON syntax for debugging, our tool provides instant results with a user-friendly interface.</p>
            
            <h3>Key Features:</h3>
            <ul>
                <li><strong>JSON Formatting:</strong> Transform minified or poorly formatted JSON into clean, readable format with proper indentation</li>
                <li><strong>JSON Validation:</strong> Check JSON syntax and identify errors with precise error location and description</li>
                <li><strong>JSON Minification:</strong> Compress JSON by removing unnecessary whitespace to reduce file size</li>
                <li><strong>Customizable Indentation:</strong> Choose between spaces or tabs, and set your preferred indent size</li>
                <li><strong>Instant Processing:</strong> All operations happen in real-time in your browser</li>
                <li><strong>Copy to Clipboard:</strong> Easily copy formatted results with one click</li>
            </ul>
            
            <h3>How to Use the JSON Formatter:</h3>
            <ol>
                <li>Paste your JSON data into the input textarea</li>
                <li>Select your preferred indentation settings</li>
                <li>Click "Format JSON" to beautify your data</li>
                <li>Copy the formatted result or continue editing</li>
            </ol>
            
            <h3>Common JSON Formatting Use Cases:</h3>
            <p>JSON formatting is essential for API development, configuration files, data analysis, and web development. Our tool helps with debugging API responses, preparing JSON for documentation, optimizing JSON for production environments, and converting between different JSON formats.</p>
        </div>
        
        <footer class="footer">
            <p>&copy; 2025 JSON Formatter Tool. Format, validate, and beautify JSON data online for free.</p>
        </footer>
    </div>

    <!-- Tree View Modal -->
    <div id="treeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">JSON Tree View</h2>
                <button class="close-modal" onclick="closeTreeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="tree-container" id="treeContainer">
                    <p style="color: #999; text-align: center; margin-top: 50px;">No JSON data to display in tree view</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTool = 'formatter';
        
        function switchTab(tool) {
            // Update tab appearance
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Clear inputs when switching tabs
            clearAll();
            
            currentTool = tool;
            updateToolInterface();
        }
        
        function updateToolInterface() {
            const middleControls = document.querySelector('.middle-controls');
            const indentControls = document.querySelector('.indent-controls');
            
            middleControls.innerHTML = '';
            
            if (currentTool === 'formatter') {
                indentControls.style.display = 'block';
                middleControls.innerHTML = `
                    <button class="btn-primary" onclick="formatJson()">Format JSON</button>
                    <button class="btn-tree" onclick="openTreeView()">Tree View</button>
                    <button class="btn-secondary" onclick="clearAll()">Clear All</button>
                    <button class="btn-success" onclick="copyOutput()">Copy Result</button>
                    <button class="btn-secondary" onclick="loadSample()">Load Sample</button>
                `;
            } else if (currentTool === 'validator') {
                indentControls.style.display = 'none';
                middleControls.innerHTML = `
                    <button class="btn-primary" onclick="validateJson()">Validate JSON</button>
                    <button class="btn-tree" onclick="openTreeView()">Tree View</button>
                    <button class="btn-secondary" onclick="clearAll()">Clear All</button>
                    <button class="btn-secondary" onclick="loadSample()">Load Sample</button>
                `;
            } else if (currentTool === 'minifier') {
                indentControls.style.display = 'none';
                middleControls.innerHTML = `
                    <button class="btn-primary" onclick="minifyJson()">Minify JSON</button>
                    <button class="btn-tree" onclick="openTreeView()">Tree View</button>
                    <button class="btn-secondary" onclick="clearAll()">Clear All</button>
                    <button class="btn-success" onclick="copyOutput()">Copy Result</button>
                    <button class="btn-secondary" onclick="loadSample()">Load Sample</button>
                `;
            }
        }
        
        function formatJson() {
            const input = document.getElementById('inputJson').value.trim();
            const output = document.getElementById('outputJson');
            const status = document.getElementById('status');
            
            if (!input) {
                showStatus('Please enter some JSON data to format.', 'error');
                return;
            }
            
            try {
                const parsed = JSON.parse(input);
                const indentType = document.getElementById('indentType').value;
                const indentSize = parseInt(document.getElementById('indentSize').value);
                const indent = indentType === 'spaces' ? ' '.repeat(indentSize) : '\t';
                
                const formatted = JSON.stringify(parsed, null, indent);
                output.value = formatted;
                showStatus('JSON formatted successfully!', 'success');
            } catch (error) {
                showStatus(`Invalid JSON: ${error.message}`, 'error');
                output.value = '';
            }
        }
        
        function validateJson() {
            const input = document.getElementById('inputJson').value.trim();
            const status = document.getElementById('status');
            
            if (!input) {
                showStatus('Please enter some JSON data to validate.', 'error');
                return;
            }
            
            try {
                JSON.parse(input);
                showStatus('✅ Valid JSON! Your JSON syntax is correct.', 'success');
                document.getElementById('outputJson').value = 'Valid JSON ✅';
            } catch (error) {
                showStatus(`❌ Invalid JSON: ${error.message}`, 'error');
                document.getElementById('outputJson').value = `Error: ${error.message}`;
            }
        }
        
        function minifyJson() {
            const input = document.getElementById('inputJson').value.trim();
            const output = document.getElementById('outputJson');
            const status = document.getElementById('status');
            
            if (!input) {
                showStatus('Please enter some JSON data to minify.', 'error');
                return;
            }
            
            try {
                const parsed = JSON.parse(input);
                const minified = JSON.stringify(parsed);
                output.value = minified;
                const originalSize = input.length;
                const minifiedSize = minified.length;
                const reduction = ((originalSize - minifiedSize) / originalSize * 100).toFixed(1);
                showStatus(`JSON minified successfully! Size reduced by ${reduction}% (${originalSize} → ${minifiedSize} characters)`, 'success');
            } catch (error) {
                showStatus(`Invalid JSON: ${error.message}`, 'error');
                output.value = '';
            }
        }
        
        function clearAll() {
            document.getElementById('inputJson').value = '';
            document.getElementById('outputJson').value = '';
            document.getElementById('status').innerHTML = '';
        }
        
        function copyOutput() {
            const output = document.getElementById('outputJson');
            if (!output.value) {
                showStatus('No output to copy. Please format some JSON first.', 'error');
                return;
            }
            
            output.select();
            document.execCommand('copy');
            showStatus('Result copied to clipboard!', 'success');
        }
        
        function loadSample() {
            const sampleJson = {
                "name": "John Doe",
                "age": 30,
                "email": "john.doe@example.com",
                "address": {
                    "street": "123 Main St",
                    "city": "New York",
                    "zipCode": "10001",
                    "country": "USA"
                },
                "hobbies": ["reading", "swimming", "coding"],
                "isActive": true,
                "salary": 75000.50,
                "projects": [
                    {
                        "name": "Website Redesign",
                        "status": "completed",
                        "deadline": "2024-12-31"
                    },
                    {
                        "name": "Mobile App",
                        "status": "in-progress",
                        "deadline": "2025-03-15"
                    }
                ]
            };
            
            document.getElementById('inputJson').value = JSON.stringify(sampleJson);
            showStatus('Sample JSON loaded successfully!', 'success');
        }
        
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.innerHTML = `<div class="status ${type}">${message}</div>`;
            
            setTimeout(() => {
                status.innerHTML = '';
            }, 5000);
        }
        
        // Auto-format on paste
        document.getElementById('inputJson').addEventListener('paste', function() {
            setTimeout(() => {
                if (currentTool === 'formatter') {
                    formatJson();
                }
            }, 100);
        });
        
        // Initialize
        updateToolInterface();
        
        // Tree View Functions
        function openTreeView() {
            const input = document.getElementById('inputJson').value.trim();
            
            if (!input) {
                showStatus('Please enter some JSON data to view in tree format.', 'error');
                return;
            }
            
            try {
                const parsed = JSON.parse(input);
                const treeContainer = document.getElementById('treeContainer');
                treeContainer.innerHTML = generateTreeView(parsed, 'root');
                document.getElementById('treeModal').classList.add('show');
                document.body.style.overflow = 'hidden';
            } catch (error) {
                showStatus(`Invalid JSON: ${error.message}`, 'error');
            }
        }
        
        function closeTreeModal() {
            document.getElementById('treeModal').classList.remove('show');
            document.body.style.overflow = 'auto';
        }
        
        function generateTreeView(obj, key = '', isRoot = false) {
            const nodeClass = isRoot ? 'tree-root' : 'tree-node';
            
            if (obj === null) {
                return `<div class="${nodeClass}"><span class="tree-key">${key}:</span> <span class="tree-null">null</span></div>`;
            }
            
            if (typeof obj === 'string') {
                return `<div class="${nodeClass}"><span class="tree-key">${key}:</span> <span class="tree-string">"${escapeHtml(obj)}"</span></div>`;
            }
            
            if (typeof obj === 'number') {
                return `<div class="${nodeClass}"><span class="tree-key">${key}:</span> <span class="tree-number">${obj}</span></div>`;
            }
            
            if (typeof obj === 'boolean') {
                return `<div class="${nodeClass}"><span class="tree-key">${key}:</span> <span class="tree-boolean">${obj}</span></div>`;
            }
            
            if (Array.isArray(obj)) {
                const count = obj.length;
                let html = `<div class="${nodeClass}">
                    <div class="tree-expandable" onclick="toggleTreeNode(this)">
                        <span class="tree-toggle">▼</span>
                        <span class="tree-key">${key}:</span> 
                        <span class="tree-bracket">[</span>
                        <span class="tree-count">${count} items</span>
                    </div>
                    <div class="tree-children">`;
                
                obj.forEach((item, index) => {
                    html += generateTreeView(item, `[${index}]`);
                });
                
                html += `</div><div class="tree-bracket" style="margin-left: 17px;">]</div></div>`;
                return html;
            }
            
            if (typeof obj === 'object') {
                const keys = Object.keys(obj);
                const count = keys.length;
                let html = `<div class="${nodeClass}">
                    <div class="tree-expandable" onclick="toggleTreeNode(this)">
                        <span class="tree-toggle">▼</span>
                        <span class="tree-key">${key}:</span> 
                        <span class="tree-bracket">{</span>
                        <span class="tree-count">${count} properties</span>
                    </div>
                    <div class="tree-children">`;
                
                keys.forEach(objKey => {
                    html += generateTreeView(obj[objKey], objKey);
                });
                
                html += `</div><div class="tree-bracket" style="margin-left: 17px;">}</div></div>`;
                return html;
            }
            
            return `<div class="${nodeClass}"><span class="tree-key">${key}:</span> <span style="color: #999;">unknown type</span></div>`;
        }
        
        function toggleTreeNode(element) {
            const parent = element.parentElement;
            const toggle = element.querySelector('.tree-toggle');
            
            if (parent.classList.contains('tree-collapsed')) {
                parent.classList.remove('tree-collapsed');
                toggle.textContent = '▼';
            } else {
                parent.classList.add('tree-collapsed');
                toggle.textContent = '▶';
            }
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // Close modal when clicking outside
        document.getElementById('treeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeTreeModal();
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.getElementById('treeModal').classList.contains('show')) {
                closeTreeModal();
            }
        });
    </script>
</body>
</html>